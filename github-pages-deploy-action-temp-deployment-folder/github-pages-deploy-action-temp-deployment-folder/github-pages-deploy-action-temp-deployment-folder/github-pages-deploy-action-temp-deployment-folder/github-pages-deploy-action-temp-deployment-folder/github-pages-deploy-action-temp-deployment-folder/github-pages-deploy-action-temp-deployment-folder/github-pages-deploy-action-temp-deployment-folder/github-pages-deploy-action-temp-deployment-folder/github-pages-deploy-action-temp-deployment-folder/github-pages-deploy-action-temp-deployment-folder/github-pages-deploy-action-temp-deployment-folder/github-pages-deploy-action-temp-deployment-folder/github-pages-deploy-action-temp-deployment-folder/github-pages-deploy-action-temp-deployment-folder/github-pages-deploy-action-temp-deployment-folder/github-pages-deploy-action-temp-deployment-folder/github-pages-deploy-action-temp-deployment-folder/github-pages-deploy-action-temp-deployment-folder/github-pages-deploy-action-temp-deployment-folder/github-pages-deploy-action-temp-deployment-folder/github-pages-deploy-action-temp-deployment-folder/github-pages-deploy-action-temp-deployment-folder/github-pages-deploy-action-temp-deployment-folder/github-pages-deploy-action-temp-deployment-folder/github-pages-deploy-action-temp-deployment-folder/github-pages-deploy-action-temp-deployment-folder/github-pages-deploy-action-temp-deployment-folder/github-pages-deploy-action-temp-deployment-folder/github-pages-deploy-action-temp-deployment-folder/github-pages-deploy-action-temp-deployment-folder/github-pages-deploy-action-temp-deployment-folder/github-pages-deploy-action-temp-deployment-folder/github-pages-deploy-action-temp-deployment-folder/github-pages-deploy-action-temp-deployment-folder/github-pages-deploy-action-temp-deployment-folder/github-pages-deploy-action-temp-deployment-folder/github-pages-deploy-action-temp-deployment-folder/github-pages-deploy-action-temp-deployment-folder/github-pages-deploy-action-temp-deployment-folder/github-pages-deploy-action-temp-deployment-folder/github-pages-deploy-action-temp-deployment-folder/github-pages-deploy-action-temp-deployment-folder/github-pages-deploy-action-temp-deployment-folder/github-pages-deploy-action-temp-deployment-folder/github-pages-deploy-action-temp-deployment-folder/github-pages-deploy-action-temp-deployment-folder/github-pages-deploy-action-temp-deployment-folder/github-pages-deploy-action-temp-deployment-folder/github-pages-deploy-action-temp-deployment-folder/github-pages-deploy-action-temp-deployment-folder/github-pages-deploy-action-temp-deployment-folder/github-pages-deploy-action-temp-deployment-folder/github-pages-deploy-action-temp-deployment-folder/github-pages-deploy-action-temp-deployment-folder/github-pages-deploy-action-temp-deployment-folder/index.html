<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>CourseHub - تعلم واحصل على شهادتك</title>
<meta name="description" content="CourseHub – تعلم أي مهارة، احصل على شهادتك، وابدأ رحلتك التعليمية الآن.">
<meta name="keywords" content="دورات, تعلم, شهادة, كورس, تطوير, تصميم, AI">

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Google Identity Services -->
<script src="https://accounts.google.com/gsi/client" async defer></script>
</head>

<body>

<!-- Google Init -->
<div id="g_id_onload"
     data-client_id="367073521017-na5sqgdpp98hqrd6us63l4117l4vbacm.apps.googleusercontent.com"
     data-callback="handleGoogleLogin"
     data-auto_prompt="false">
</div>

<!-- Header -->
<header>
  <div class="top-bar container">
    <div class="logo">
      <img src="images/logo.png" alt="CourseHub Logo" class="site-logo">
    </div>

    <nav>
      <a href="index.html">الرئيسية</a>
      <a href="courses.html">الدورات</a>
      <a href="tests.html">الاختبارات</a>
      <a href="certificates.html">الشهادات</a>
      <a href="login.html" id="login-link">تسجيل الدخول</a>
    </nav>

    <div id="user-info" class="user-info-container"></div>
  </div>

  <!-- Search Bar -->
  <div class="search-bar container">
    <input type="text" id="searchInput" placeholder="ابحث عن دورة...">
    <button onclick="searchCourses()">
      <i class="fa fa-search"></i> بحث
    </button>
  </div>
</header>

<!-- Hero Section -->
<section class="hero">
  <div class="container hero-content">
    <h1>تعلم أي مهارة جديدة بسهولة</h1>
    <p>انضم إلى آلاف الطلاب وابدأ رحلتك التعليمية الآن!</p>
    <a href="courses.html" class="btn btn-hero">استكشف الدورات</a>
  </div>
</section>

<!-- Features Section -->
<section class="features container">
  <div class="feature">
    <i class="fa fa-users fa-2x"></i>
    <h3>آلاف الطلاب</h3>
    <p>انضم إلى مجتمع ضخم من المتعلمين من جميع أنحاء العالم.</p>
  </div>

  <div class="feature">
    <i class="fa fa-certificate fa-2x"></i>
    <h3>شهادات معتمدة</h3>
    <p>احصل على شهادة رسمية عند إتمام الدورة بنجاح.</p>
  </div>

  <div class="feature">
    <i class="fa fa-laptop-code fa-2x"></i>
    <h3>دورات احترافية</h3>
    <p>تعلم من محترفين وابدأ مسارك المهني بسرعة.</p>
  </div>
</section>

<!-- Popular Courses -->
<section class="popular-courses container">
  <h2>الدورات الأكثر شعبية</h2>

  <div class="categories">
    <button class="active" onclick="filterCategory('all')">الكل</button>
    <button onclick="filterCategory('web')">تطوير الويب</button>
    <button onclick="filterCategory('ai')">الذكاء الاصطناعي</button>
    <button onclick="filterCategory('design')">التصميم</button>
  </div>

  <div class="courses-grid" id="coursesGrid">
    <!-- دورات ديناميكية -->
  </div>
</section>

<!-- Footer -->
<footer>
  <div class="container footer-content">
    <div class="footer-links">
      <a href="index.html">الرئيسية</a>
      <a href="courses.html">الدورات</a>
      <a href="tests.html">الاختبارات</a>
      <a href="certificates.html">الشهادات</a>
      <a href="login.html" id="footer-login">تسجيل الدخول</a>
    </div>

    <div class="socials">
      <a href="#"><i class="fab fa-facebook-f"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-linkedin-in"></i></a>
    </div>

    <p>&copy; 2026 CourseHub. جميع الحقوق محفوظة.</p>
  </div>
</footer>

<!-- Scripts -->
<script src="main.js"></script>
<script>
// Google Login Handler
function handleGoogleLogin(response) {
  const jwt = response.credential;
  const payload = JSON.parse(atob(jwt.split('.')[1]));

  localStorage.setItem("coursehub_user", JSON.stringify({
    name: payload.name,
    email: payload.email,
    picture: payload.picture
  }));

  location.reload();
}

// عرض المستخدم في الهيدر إذا مسجل الدخول
const user = JSON.parse(localStorage.getItem("coursehub_user"));
if(user){
  document.getElementById('login-link').style.display = 'none';
  document.getElementById('footer-login').style.display = 'none';

  document.getElementById('user-info').innerHTML = `
    <div class="user-dropdown">
      <img src="${user.picture}" alt="${user.name}" class="user-pic" id="user-pic">
      <span id="user-name">${user.name}</span>
      <div class="dropdown-menu" id="dropdown-menu">
        <a href="profile.html">حسابي</a>
        <a href="#" onclick="logout()">تسجيل الخروج</a>
      </div>
    </div>
  `;

  // Dropdown toggle
  const userDropdown = document.querySelector('.user-dropdown');
  const dropdownMenu = document.getElementById('dropdown-menu');

  userDropdown.addEventListener('click', function(){
    dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
  });
}

// Logout
function logout(){
  localStorage.removeItem("coursehub_user");
  location.reload();
}

// حماية الصفحات
document.addEventListener('DOMContentLoaded', function(){
  const protectedPages = ['courses.html','tests.html','certificates.html'];
  const currentPage = window.location.pathname.split("/").pop();
  if(!user && protectedPages.includes(currentPage)){
    alert('يجب تسجيل الدخول للوصول لهذه الصفحة');
    window.location.href = 'login.html';
  }
});

// Dynamic Courses (يمكنك لاحقاً ربطها بقاعدة بيانات)
const coursesData = [
  {title:'تطوير الويب للمبتدئين', category:'web', students:1200, img:'images/course1.jpg', desc:'تعلم HTML و CSS و JavaScript خطوة بخطوة.', link:'course-details.html'},
  {title:'الذكاء الاصطناعي', category:'ai', students:950, img:'images/course2.jpg', desc:'ابدأ رحلتك مع تعلم الآلة والذكاء الاصطناعي.', link:'course-details.html'},
  {title:'التصميم الجرافيكي', category:'design', students:800, img:'images/course3.jpg', desc:'تعلم Photoshop و Illustrator من الصفر.', link:'course-details.html'}
];

function loadCourses(){
  const grid = document.getElementById('coursesGrid');
  grid.innerHTML = '';
  coursesData.forEach(course=>{
    const card = document.createElement('div');
    card.className = 'card';
    card.setAttribute('data-category', course.category);
    card.innerHTML = `
      <img src="${course.img}" alt="${course.title}">
      <div class="card-content">
        <h3>${course.title}</h3>
        <div class="rating">
          ${'<i class="fa fa-star"></i>'.repeat(4)}<i class="fa fa-star-half-alt"></i>
          <span>(${course.students} طالب)</span>
        </div>
        <p>${course.desc}</p>
        <a href="${course.link}" class="btn">عرض الدورة</a>
      </div>
    `;
    grid.appendChild(card);
  });
}
loadCourses();

// Filter
function filterCategory(cat){
  const buttons = document.querySelectorAll('.categories button');
  buttons.forEach(btn=>btn.classList.remove('active'));
  event.target.classList.add('active');

  const cards = document.querySelectorAll('.card');
  cards.forEach(c=>{
    if(cat==='all' || c.dataset.category===cat){
      c.style.display = 'block';
    } else c.style.display = 'none';
  });
}
</script>
</body>
</html>
