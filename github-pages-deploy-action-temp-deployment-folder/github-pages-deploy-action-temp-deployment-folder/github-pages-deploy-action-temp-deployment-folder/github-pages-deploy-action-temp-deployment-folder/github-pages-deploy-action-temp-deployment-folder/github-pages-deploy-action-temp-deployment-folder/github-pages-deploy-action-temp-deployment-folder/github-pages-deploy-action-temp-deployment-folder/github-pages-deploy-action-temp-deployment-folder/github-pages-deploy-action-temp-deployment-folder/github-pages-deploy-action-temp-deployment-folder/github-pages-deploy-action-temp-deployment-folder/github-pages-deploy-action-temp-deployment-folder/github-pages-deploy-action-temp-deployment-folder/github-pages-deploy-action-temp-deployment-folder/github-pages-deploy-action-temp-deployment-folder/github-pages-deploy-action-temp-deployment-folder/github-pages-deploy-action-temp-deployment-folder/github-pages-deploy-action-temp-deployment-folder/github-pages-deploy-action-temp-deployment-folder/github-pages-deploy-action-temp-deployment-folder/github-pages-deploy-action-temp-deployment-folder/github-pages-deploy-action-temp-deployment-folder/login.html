<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تسجيل الدخول - CourseHub</title>

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Google Identity Services -->
<script src="https://accounts.google.com/gsi/client" async defer></script>
<script src="main.js" defer></script>
</head>

<body>

<!-- Header Placeholder -->
<div id="header-placeholder"></div>

<section class="course-detail">
  <h2>تسجيل الدخول</h2>

  <!-- Form البريد الإلكتروني -->
  <form id="email-login-form">
    <label for="email">البريد الإلكتروني</label>
    <input type="email" id="email" name="email" autocomplete="email" placeholder="example@mail.com" required>

    <label for="password">كلمة المرور</label>
    <input type="password" id="password" name="password" autocomplete="current-password" placeholder="********" required>

    <button class="btn" type="submit">تسجيل الدخول</button>
  </form>

  <p>أو سجل الدخول بواسطة:</p>

  <!-- Google Button -->
  <div id="g_id_onload"
       data-client_id="367073521017-na5sqgdpp98hqrd6us63l4117l4vbacm.apps.googleusercontent.com"
       data-callback="handleGoogleLogin"
       data-auto_prompt="false">
  </div>

  <div class="g_id_signin"
       data-type="standard"
       data-size="large">
  </div>

  <p><a href="forgot-password.html">نسيت كلمة المرور؟</a></p>
  <p>ليس لديك حساب؟ <a href="register.html">إنشاء حساب</a></p>
</section>

<!-- Footer Placeholder -->
<div id="footer-placeholder"></div>

<script>
// Google Login Handler
function handleGoogleLogin(response) {
  const jwt = response.credential;
  const payload = JSON.parse(atob(jwt.split('.')[1]));

  // حفظ بيانات المستخدم محليًا
  localStorage.setItem("coursehub_user", JSON.stringify({
    name: payload.name,
    email: payload.email,
    picture: payload.picture
  }));

  // تحويل للرئيسية بعد تسجيل الدخول
  window.location.href = "index.html";
}
</script>

</body>
</html>
