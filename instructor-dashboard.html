<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ููุญุฉ ุงูุฃุณุชุงุฐ | CourseHub</title>

  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/header.css" />
  <link rel="stylesheet" href="/css/footer.css" />
  <link rel="stylesheet" href="/admin/css-admin/admin.css" />
  <link rel="stylesheet" href="/css/instructor-dashboard.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <script>
    // ููุน ุถูุถุงุก ุฅุถุงูุงุช ุงููุชุตูุญ ูุจู ุชุญููู ุฃู ุณูุฑุจุชุงุช defer/module
    (function () {
      const shouldIgnore = (value) => {
        const msg = String((value && value.message) || value || "");
        return msg.includes("Receiving end does not exist") || msg.includes("Could not establish connection");
      };

      window.addEventListener("unhandledrejection", function (event) {
        if (shouldIgnore(event && event.reason)) {
          event.preventDefault();
          event.stopImmediatePropagation();
        }
      }, true);

      window.addEventListener("error", function (event) {
        if (shouldIgnore(event && event.message)) {
          event.preventDefault();
          event.stopImmediatePropagation();
        }
      }, true);
    })();
  </script>
</head>

<body>
  <div id="header-placeholder"></div>

  <main class="instructor-shell container">
    <section class="instructor-hero">
      <div>
        <p class="hero-kicker">Instructor Studio</p>
        <h1>ููุญุฉ ุชุญูู ุงูุฃุณุชุงุฐ ุงูุงุญุชุฑุงููุฉ</h1>
        <p>ุงุจูู ุฏูุฑุชู ุจููุณ ุชุฌุฑุจุฉ ููุญุฉ ุงููุดุฑู: ูุนูููุงุช ุดุงููุฉุ ุชุฎุทูุท ููุงูุฌ ูุฑูุ ูุนุงููุฉ ูุจุงุดุฑุฉุ ุซู ุฅุฑุณุงู ูููุฑุงุฌุนุฉ.</p>
      </div>
      <div class="instructor-kpis">
        <div><strong id="pendingCount">0</strong><span>ููุฏ ุงููุฑุงุฌุนุฉ</span></div>
        <div><strong id="approvedCount">0</strong><span>ูุนุชูุฏุฉ</span></div>
      </div>
    </section>

    <!-- Topbar -->
    <section class="instructor-admin-topbar card">
      <div class="topbar-left">
        <button type="button" id="workspaceSidebarToggle" class="sidebar-toggle-btn" aria-label="ุชุจุฏูู ุงููุงุฆูุฉ">โฐ</button>
        <h2>ููุญุฉ ุงูุฃุณุชุงุฐ</h2>
      </div>
      <div class="topbar-right">
        <input type="text" placeholder="ุงุจุญุซ ูู ุฏูุฑุงุชู..." aria-label="ุจุญุซ" />
        <button type="button" class="btn ghost">๐</button>
      </div>
    </section>

    <!-- Workspace -->
    <section class="card instructor-workspace" id="instructorWorkspace">
      <aside class="workspace-sidebar">
        <div class="workspace-brand">
          <h3>Instructor Panel</h3>
          <p>ููุญุฉ ุงูุฃุณุชุงุฐ</p>
        </div>

        <!-- โ ูุงุฆูุฉ ูุงุญุฏุฉ ููุท (ุญู ุงูุชุนุงุฑุถ) -->
        <ul class="workspace-menu">
          <li>
            <button type="button" class="workspace-link active" data-action="open-builder" data-builder-tab="info" data-target="ws-add">
              <span>โ</span><strong>ุฅุถุงูุฉ ุฏูุฑุฉ</strong>
            </button>
          </li>
          <li>
            <button type="button" class="workspace-link" data-target="ws-drafts">
              <span>๐</span><strong>ุงููุณูุฏุงุช</strong>
            </button>
          </li>
          <li>
            <button type="button" class="workspace-link" data-target="ws-pending">
              <span>โณ</span><strong>ููุฏ ุงููุฑุงุฌุนุฉ</strong>
            </button>
          </li>
          <li>
            <button type="button" class="workspace-link" data-target="ws-approved">
              <span>โ</span><strong>ุงูููุจููุฉ</strong>
            </button>
          </li>
          <li>
            <button type="button" class="workspace-link" data-target="ws-rejected">
              <span>โ</span><strong>ุงููุฑููุถุฉ</strong>
            </button>
          </li>
          <li>
            <button type="button" class="workspace-link" data-target="ws-published">
              <span>๐</span><strong>ุงูููุดูุฑุฉ</strong>
            </button>
          </li>
          <li>
            <button type="button" class="workspace-link" data-target="ws-archived">
              <span>๐๏ธ</span><strong>ุงููุคุฑุดูุฉ</strong>
            </button>
          </li>
          <li>
            <button type="button" class="workspace-link" data-target="ws-chat">
              <span>๐ฌ</span><strong>ุงูุฑุณุงุฆู</strong><span id="chatNavBadge" class="chat-nav-badge" hidden>0</span>
            </button>
          </li>
        </ul>
      </aside>

      <div class="workspace-content">
        <!-- โ Panel: Add course (builder) -->
        <div id="ws-add" class="workspace-panel active">
          <section class="builder-shell">
            <div class="builder-header">
              <h2>ููุดุฆ ุงูุฏูุฑุงุช ุงูุงุญุชุฑุงูู</h2>
              <p>ููุณ ูุงูุจ ููุญุฉ ุงููุดุฑู ุชูุงููุงุ ูุน ุฃุฏูุงุช ูุชุงุจุฉ ูุชุญูู ุฃูุซุฑ ุงุญุชุฑุงููุฉ ููุฃุณุชุงุฐ ูุจู ุงูุฅุฑุณุงู ูููุฑุงุฌุนุฉ.</p>
            </div>

            <div class="builder-tabs" id="instructorBuilderTabs">
              <button class="tab-btn active" type="button" data-tab="info">
                <i class="fa-solid fa-circle-info"></i><span>ูุนูููุงุช ุงูุฏูุฑุฉ</span>
              </button>
              <button class="tab-btn" type="button" data-tab="curriculum">
                <i class="fa-solid fa-layer-group"></i><span>ุงูุฏุฑูุณ ูุงููุญุชูู</span>
              </button>
              <button class="tab-btn" type="button" data-tab="preview">
                <i class="fa-solid fa-eye"></i><span>ุงููุนุงููุฉ</span>
              </button>
              <button class="tab-btn" type="button" data-tab="submit">
                <i class="fa-solid fa-paper-plane"></i><span>ุงูุฅุฑุณุงู ูููุฑุงุฌุนุฉ</span>
              </button>
            </div>

            <form id="instructorCourseForm" class="instructor-builder-form" novalidate>
              <!-- INFO -->
              <div class="tab-content active" id="tab-info">
                <div class="builder-card">
                  <div class="form-grid">
                    <div class="field-group">
                      <label for="courseTitle">ุนููุงู ุงูุฏูุฑุฉ</label>
                      <input id="courseTitle" type="text" placeholder="ูุซุงู: ุฃุณุงุณูุงุช ุชุทููุฑ ูุงุฌูุงุช ุงูููุจ ุงูุญุฏูุซุฉ" required />
                    </div>
                    <div class="field-group">
                      <label for="courseTitleEn">ุนููุงู ุงูุฏูุฑุฉ (ุจุงูุฅูุฌููุฒูุฉ)</label>
                      <input id="courseTitleEn" type="text" placeholder="Modern Front-End Foundations" />
                    </div>
                    <div class="field-group">
                      <label for="courseCategory">ุงูุชุตููู</label>
                      <input id="courseCategory" type="text" placeholder="ูุซุงู: ุชุทููุฑ ุงูููุจ" required />
                    </div>
                    <div class="field-group">
                      <label for="coursePrice">ุงูุณุนุฑ (USD)</label>
                      <input id="coursePrice" type="number" min="0" step="0.01" placeholder="49.99" required />
                    </div>
                    <div class="field-group">
                      <label for="courseLevel">ุงููุณุชูู</label>
                      <select id="courseLevel">
                        <option value="ูุจุชุฏุฆ">ูุจุชุฏุฆ</option>
                        <option value="ูุชูุณุท">ูุชูุณุท</option>
                        <option value="ูุชูุฏู">ูุชูุฏู</option>
                      </select>
                    </div>
                    <div class="field-group">
                      <label for="courseLanguage">ูุบุฉ ุงูุฏูุฑุฉ</label>
                      <select id="courseLanguage">
                        <option value="ุงูุนุฑุจูุฉ">ุงูุนุฑุจูุฉ</option>
                        <option value="English">English</option>
                      </select>
                    </div>
                    <div class="field-group">
                      <label for="courseDuration">ุงููุฏุฉ (ุณุงุนุงุช)</label>
                      <input id="courseDuration" type="number" min="1" placeholder="12" />
                    </div>
                    <div class="field-group">
                      <label for="courseDifficulty">ุดุฏุฉ/ุฅููุงุน ุงูุฏูุฑุฉ</label>
                      <select id="courseDifficulty">
                        <option value="ุฎููู">ุฎููู</option>
                        <option value="ูุชูุงุฒู">ูุชูุงุฒู</option>
                        <option value="ููุซู">ููุซู</option>
                      </select>
                    </div>
                  </div>

                  <div class="field-group">
                    <label for="courseDescription">ูุตู ุงูุฏูุฑุฉ</label>
                    <div class="text-toolbar" id="descriptionToolbar">
                      <button type="button" class="toolbar-btn" data-format="h2">ุนููุงู ูุฑุนู</button>
                      <button type="button" class="toolbar-btn" data-format="bold">ุนุฑูุถ</button>
                      <button type="button" class="toolbar-btn" data-format="bullet">ูุงุฆูุฉ</button>
                      <button type="button" class="toolbar-btn" data-format="tip">ูุตูุญุฉ</button>
                    </div>
                    <textarea id="courseDescription" rows="5" placeholder="ุงูุชุจ ูุตููุง ุงุญุชุฑุงูููุง ููุถุญ ุงููููุฉ ุงูุชุนููููุฉ ูุงููุฆุฉ ุงููุณุชูุฏูุฉ" required></textarea>
                    <span class="helper-text">ููููู ุงุณุชุฎุฏุงู ุดุฑูุท ุงูุฃุฏูุงุช ูุชูุณูู ุงููุต ุจุณุฑุนุฉ ูุซู ูุงูุจ ุงููุดุฑู ุงููุชูุฏู.</span>
                  </div>

                  <div class="form-grid">
                    <div class="field-group">
                      <label for="courseImage">ุตูุฑุฉ ุงูุบูุงู</label>
                      <input id="courseImage" type="file" accept="image/*" />
                    </div>
                    <div class="field-group">
                      <label for="courseImageUrl">ุฑุงุจุท ุตูุฑุฉ ุงูุบูุงู (ุงุฎุชูุงุฑู)</label>
                      <input id="courseImageUrl" type="url" placeholder="https://example.com/cover.jpg" />
                    </div>
                  </div>

                  <div class="cover-preview-wrap">
                    <p class="helper-text">ูุนุงููุฉ ุงูุบูุงู</p>
                    <img id="coverPreview" src="/assets/images/default-course.png" alt="ูุนุงููุฉ ุงูุบูุงู">
                  </div>
                </div>
              </div>

              <!-- CURRICULUM -->
              <div class="tab-content" id="tab-curriculum">
                <div class="builder-card">
                  <div class="builder-card-head">
                    <h3>ุนูุงุตุฑ ุฅุถุงููุฉ ุชููุญู ุญุฑูุฉ ุฃูุจุฑ</h3>
                    <p>ุฃุถู ุงูุฃูุฏุงู ูุงููุชุทูุจุงุช ููุฎุฑุฌุงุช ุงูุชุนูู ูุจููุฏ ุฏููุงููููุฉ.</p>
                  </div>

                  <div class="list-editors">
                    <div class="dynamic-list" data-list="objectives">
                      <div class="dynamic-head">
                        <h4>ุฃูุฏุงู ุงูุฏูุฑุฉ</h4>
                        <button type="button" class="add-row-btn" data-target="objectives"><i class="fa-solid fa-plus"></i> ุฅุถุงูุฉ ูุฏู</button>
                      </div>
                      <div id="objectivesList" class="rows-container"></div>
                    </div>

                    <div class="dynamic-list" data-list="requirements">
                      <div class="dynamic-head">
                        <h4>ุงููุชุทูุจุงุช ุงููุณุจูุฉ</h4>
                        <button type="button" class="add-row-btn" data-target="requirements"><i class="fa-solid fa-plus"></i> ุฅุถุงูุฉ ูุชุทูุจ</button>
                      </div>
                      <div id="requirementsList" class="rows-container"></div>
                    </div>

                    <div class="dynamic-list" data-list="outcomes">
                      <div class="dynamic-head">
                        <h4>ูุฎุฑุฌุงุช ุงูุชุนูู</h4>
                        <button type="button" class="add-row-btn" data-target="outcomes"><i class="fa-solid fa-plus"></i> ุฅุถุงูุฉ ูุฎุฑุฌ</button>
                      </div>
                      <div id="outcomesList" class="rows-container"></div>
                    </div>
                  </div>
                </div>

                <div class="builder-card">
                  <div class="builder-card-head">
                    <h3>ุฎุทุฉ ุงููููุฌ (Modules/Lessons)</h3>
                    <p>ูุงุจู ููุชูุณุนุฉ ุจุงููุงูู: ุฃุถู ุนุฏุฏูุง ุบูุฑ ูุญุฏูุฏ ูู ุงููุญุฏุงุช ูุงูุฏุฑูุณ.</p>
                  </div>
                  <div id="modulesContainer" class="modules-container"></div>
                  <button type="button" class="btn ghost" id="addModuleBtn"><i class="fa-solid fa-plus"></i> ุฅุถุงูุฉ ูุญุฏุฉ ุฌุฏูุฏุฉ</button>
                </div>

                <div class="builder-card">
                  <div class="builder-card-head">
                    <h3>ุจูุงุก ุงุฎุชุจุงุฑ ุงูุฏูุฑุฉ (Quiz Builder)</h3>
                    <p>ุฃูุดุฆ ุจูู ุฃุณุฆูุฉ ูุงูู ููุชู ูุฑุงุฌุนุชู ูู ุงููุดุฑู ูุจู ูุดุฑ ุงูุฏูุฑุฉ.</p>
                  </div>
                  <div id="assessmentQuestions" class="assessment-questions"></div>
                  <button type="button" class="btn ghost" id="addQuestionBtn"><i class="fa-solid fa-plus"></i> ุฅุถุงูุฉ ุณุคุงู</button>
                </div>

                <div class="builder-card">
                  <div class="builder-card-head">
                    <h3>ููู ุงููููุฌ/ุงูุฎุทุฉ</h3>
                    <p>ุงุฑูุน ููู PDF/DOC/DOCX ูุฅุถุงูุฉ ูุฑุฌุนูุฉ ุชูุตูููุฉ ูููุฑุงุฌุนูู.</p>
                  </div>
                  <label class="file-upload">ุงุฎุชูุงุฑ ุงูููู
                    <input id="courseOutline" type="file" accept=".pdf,.doc,.docx" />
                  </label>
                </div>
              </div>

              <!-- PREVIEW -->
              <div class="tab-content" id="tab-preview">
                <div class="builder-card course-public-preview">
                  <div class="course-public-hero">
                    <div class="course-public-copy">
                      <span class="course-tag" id="previewCategoryTag">ุชุตููู ุงูุฏูุฑุฉ</span>
                      <h3 id="previewTitle">ุนููุงู ุงูุฏูุฑุฉ</h3>
                      <p id="previewDescription">ุณูุธูุฑ ูุตู ุงูุฏูุฑุฉ ููุง ุจุนุฏ ุฅุฏุฎุงูู.</p>
                      <div class="meta-chips" id="previewMeta"></div>
                    </div>
                    <img id="previewCover" src="/assets/images/default-course.png" alt="cover preview" class="preview-cover">
                  </div>

                  <div class="preview-grid-two">
                    <div>
                      <h4>ูุงุฐุง ุณูุชุนูู ุงูุทุงูุจุ</h4>
                      <ul id="previewObjectives"></ul>
                    </div>
                    <div>
                      <h4>ุฎุทุฉ ุงููุญุฏุงุช ูุงูุฏุฑูุณ</h4>
                      <div id="previewModules" class="preview-modules"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SUBMIT -->
              <div class="tab-content" id="tab-submit">
                <div class="builder-card">
                  <h3>ูุงุฆูุฉ ูุฑุงุฌุนุฉ ูุจู ุงูุฅุฑุณุงู</h3>
                  <div class="review-list">
                    <label><input type="checkbox" class="review-check"> ุนููุงู ูุงุถุญ + ูุตู ุงุญุชุฑุงูู</label>
                    <label><input type="checkbox" class="review-check"> ุตูุฑุฉ ุบูุงู ููุงุณุจุฉ</label>
                    <label><input type="checkbox" class="review-check"> ุฃูุฏุงู ููุฎุฑุฌุงุช ุชุนูู ูุงุถุญุฉ</label>
                    <label><input type="checkbox" class="review-check"> ูููู ูููุฌ ููุธูู ุจูุญุฏุงุช/ุฏุฑูุณ</label>
                  </div>

                  <div class="submit-actions">
                    <button type="button" class="btn secondary" id="saveDraftBtn">ุญูุธ ูู ูุณูุฏุชู ุงูุฎุงุตุฉ</button>
                    <button type="submit" class="btn">ุฅุฑุณุงู ูููุฑุงุฌุนุฉ</button>
                  </div>

                  <p id="instructorFormStatus" class="status"></p>
                </div>
              </div>
            </form>
          </section>
        </div>

        <!-- โ ุจุงูู Panels -->
        <div id="ws-drafts" class="workspace-panel">
          <h3>ูุณูุฏุงุชู ุงูุฎุงุตุฉ</h3>
          <div id="draftsList" class="submission-list"></div>
        </div>

        <div id="ws-pending" class="workspace-panel">
          <h3>ุงูุฏูุฑุงุช ููุฏ ุงููุฑุงุฌุนุฉ</h3>
          <div id="pendingList" class="submission-list"></div>
        </div>

        <div id="ws-approved" class="workspace-panel">
          <h3>ุงูุฏูุฑุงุช ุงูููุจููุฉ</h3>
          <div id="approvedList" class="submission-list"></div>
        </div>

        <div id="ws-rejected" class="workspace-panel">
          <h3>ุงูุฏูุฑุงุช ุงููุฑููุถุฉ (ูุน ุงูุฃุณุจุงุจ)</h3>
          <div id="rejectedList" class="submission-list"></div>
        </div>

        <div id="ws-published" class="workspace-panel">
          <h3>ุงูุฏูุฑุงุช ุงูููุดูุฑุฉ</h3>
          <div id="publishedList" class="submission-list"></div>
        </div>

        <div id="ws-archived" class="workspace-panel">
          <h3>ุงูุฏูุฑุงุช ุงููุคุฑุดูุฉ</h3>
          <div id="archivedList" class="submission-list"></div>
        </div>

        <div id="ws-chat" class="workspace-panel">
          <h3>ุงูุชุญุฏุซ ูุน ุงููุดุฑู <span id="chatPanelBadge" class="chat-panel-badge" hidden>0 ุฌุฏูุฏ</span></h3>
          <div id="instructorChatMessages" class="chat-messages"></div>
          <div class="chat-compose">
            <textarea id="instructorChatInput" rows="3" placeholder="ุงูุชุจ ุฑุณุงูุชู ูููุดุฑู..."></textarea>
            <button type="button" class="btn" id="sendInstructorChatBtn">ุฅุฑุณุงู</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div id="footer-placeholder"></div>

  <script src="/js/main.js" defer></script>
  <script type="module" src="/js/instructor-dashboard.js?v=20260220"></script>

  <!-- โ ุฏุนู ุฒุฑ ุทู ุงูุณุงูุฏุจุงุฑ ุจุฏูู ูุณุฑ ุฃู ููุฒุฉ -->
  <script>
    (function () {
      const btn = document.getElementById("workspaceSidebarToggle");
      const ws = document.getElementById("instructorWorkspace");
      if (!btn || !ws) return;

      btn.addEventListener("click", () => {
        ws.classList.toggle("sidebar-collapsed");
      });
    })();
  </script>
</body>
</html>